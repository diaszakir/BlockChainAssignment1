const Web3 = require('web3');
const fs = require('fs');

// Connect to Ganache
const web3 = new Web3('http://127.0.0.1:7545');

// ABI and Bytecode of the contract (generated after compiling the Solidity contract)
const abi = [/* Replace with your ABI */];
const bytecode = '0x' + '6080604052348015600e575f5ffd5b50335f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506102e28061005b5f395ff3fe608060405260043610610037575f3560e01c80630fdb1c101461004257806312065fe0146100585780638da5cb5b146100825761003e565b3661003e57005b5f5ffd5b34801561004d575f5ffd5b506100566100ac565b005b348015610063575f5ffd5b5061006c610180565b60405161007991906101c3565b60405180910390f35b34801561008d575f5ffd5b50610096610187565b6040516100a3919061021b565b60405180910390f35b3373ffffffffffffffffffffffffffffffffffffffff165f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461013a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101319061028e565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff166108fc4790811502906040515f60405180830381858888f1935050505015801561017d573d5f5f3e3d5ffd5b50565b5f47905090565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b5f819050919050565b6101bd816101ab565b82525050565b5f6020820190506101d65f8301846101b4565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610205826101dc565b9050919050565b610215816101fb565b82525050565b5f60208201905061022e5f83018461020c565b92915050565b5f82825260208201905092915050565b7f596f7520617265206e6f7420746865206f776e657200000000000000000000005f82015250565b5f610278601583610234565b915061028382610244565b602082019050919050565b5f6020820190508181035f8301526102a58161026c565b905091905056fea2646970667358221220ad676da098299364fcf3ea204ea478fc03a5cdafb8c881687cfe28dfed9b4a9a64736f6c634300081c0033';

// Deploy the contract
const deployContract = async () => {
  const accounts = await web3.eth.getAccounts();
  const owner = accounts[0];

  console.log(`Deploying contract from account: ${owner}`);
  const contract = new web3.eth.Contract(abi);

  const deployedContract = await contract
    .deploy({ data: bytecode })
    .send({ from: owner, gas: 1500000, gasPrice: '30000000000' });

  console.log(`Contract deployed at address: ${deployedContract.options.address}`);
};

deployContract().catch(console.error);
